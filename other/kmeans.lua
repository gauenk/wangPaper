require 'torch'
require 'gnuplot'

data1 = torch.Tensor({{1,2},{1,1},{2,1},{1.5,1.5},{1.25,1.75},{2.25,2},{2.25,2},{0.75,1},{1.75,0.25},{2.5,1.5},{2.1,0.5},{1.35,0.6}})
data2 = torch.Tensor({{4.65,5},{4.7,4},{5,4},{5.25,4.5},{4.65,4.2},{5.4,4.75},{5.25,5},{4.35,4},{4.75,4.7},{5.5,4.5},{5.1,3.5},{5.2,4.3}})
data3 = torch.Tensor({{1,6},{1,5},{2,5},{1.5,5.8},{1.25,5.75},{2.25,5.2},{2.25,5.43},{0.75,5.38},{1.75,5.9},{2.5,5.5},{2.1,5.25},{1.35,5.6}})
data = torch.Tensor({{1,2},{1,1},{2,1},{1.5,1.5},{1.25,1.75},{2.25,2},{2.25,2},{0.75,1},{1.75,0.25},{2.5,1.5},{2.1,0.5},{1.35,0.6},{4.65,5},{4.7,4},{5,4},{5.25,4.5},{4.65,4.2},{5.4,4.75},{5.25,5},{4.35,4},{4.75,4.7},{5.5,4.5},{5.1,3.5},{5.2,4.3},{1,6},{1,5},{2,5},{1.5,5.8},{1.25,5.75},{2.25,5.2},{2.25,5.43},{0.75,5.38},{1.75,5.9},{2.5,5.5},{2.1,5.25},{1.35,5.6}})


gnuplot.figure(1)
gnuplot.plot(
   {data1[{{},1}],data1[{{},2}],'+'},
   {data2[{{},1}],data2[{{},2}],'+'},
   {data3[{{},1}],data3[{{},2}],'+'})
gnuplot.axis{-0.25,6.4,-0.25,6.4}

gnuplot.figure(2)
gnuplot.plot({data[{{},1}],data[{{},2}],'+'})
gnuplot.axis{-0.25,6.4,-0.25,6.4}
gnuplot.raw('set style data points lt palette cb -45')

x1= torch.mean(data1[{{},1}])
y1= torch.mean(data1[{{},2}])
x2= torch.mean(data2[{{},1}])
y2= torch.mean(data2[{{},2}])
x3= torch.mean(data3[{{},1}])
y3= torch.mean(data3[{{},2}])

midpts = torch.Tensor({{x1,y1},{x2,y2},{x3,y3}})
gnuplot.figure(3)
gnuplot.plot(
   {data1[{{},1}],data1[{{},2}],'+'},
   {data2[{{},1}],data2[{{},2}],'+'},
   {data3[{{},1}],data3[{{},2}],'+'},
   {midpts[{{},1}],midpts[{{},2}],'+'})
gnuplot.axis{-0.25,6.4,-0.25,6.4}


print(string.format("(%.3f,%.3f)",x1,y1))
print(string.format("(%.3f,%.3f)",x2,y2))
print(string.format("(%.3f,%.3f)",x3,y3))
